<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mailbox</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="mailbox-page">
  <h2>for my love ðŸ’Œ</h2>

  <!-- GRID -->
  <div class="letters-grid">

    <button class="letter-card"
      data-title="05/02/2026"
      data-paper="stationery01.png"
      data-body="hello, my love. i made this mailbox for you so that i can send you letters whenever i want, and you can read them whenever you want. i hope you like it. i love you so so so much.">
      05/02/2026
    </button>

    <button class="letter-card"
      data-title="13/02/2026"
      data-paper="stationery08.png"
      data-body="get well soon, my love. i love you so so much. my heart, my home, my heaven on earth. please stay safe. please dont be afraid to tell me if you need help. i want to be there for you, my love.">
      13/02/2026
    </button>

    <button class="letter-card"
      data-title="14/02/2026"
      data-paper="stationery03.png"
      data-body="happy valentineâ€™s day, my love! i hope you have a wonderful day filled with love and happiness. i am so grateful to have you in my life, and i canâ€™t wait to spend many more valentineâ€™s days with you. i love you more than words can express.">
      14/02/2026
    </button>

    <button class="letter-card"
      data-title="15/02/2026"
      data-paper="stationery09.png"
      data-body="somehow, in this big world, i still found you; at the most unexpected time, in the most unexpected way, and like clockwork i fell inlove so easily. now, i canâ€™t imagine my life without you. you are my everything, my love.">
      15/02/2026
    </button>

    <button class="letter-card"
      data-title="16/02/2026"
      data-paper="stationery09.png"
      data-body="the sound of your laughter is the best song i've ever heard. when my friends are all dirt and worm as i face the dirt, my bones will be traced with my favourite song. you're my favourite symphony, my love.">
      16/02/2026
    </button>

    <button class="letter-card"
      data-title="17/02/2026"
      data-paper="stationery09.png"
      data-body="you truly are my favourite. my favourite pair of eyes, my favourite smile, my favourite smile, my favourite notification on my phone. my favourite way to spend a lifetime. my favourite everything.">
      17/02/2026
    </button>

  </div>

  <!-- MODAL -->
  <div class="modal-overlay" id="modalOverlay" aria-hidden="true">
    <div class="modal stationery" id="letterModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="modal-close" id="modalClose">âœ•</button>
      <h3 id="modalTitle"></h3>
      <p id="modalBody"></p>
    </div>
  </div>

  <script>
    const overlay = document.getElementById("modalOverlay");
    const closeBtn = document.getElementById("modalClose");
    const titleEl = document.getElementById("modalTitle");
    const bodyEl = document.getElementById("modalBody");
    const modalEl = document.getElementById("letterModal");

    function openModal(title, body, paper) {
      titleEl.textContent = title;
      bodyEl.textContent = body;
      modalEl.style.backgroundImage = `url("images/stationery/${paper}")`;

      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden", "false");
    }

    function closeModal() {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
    }

    function parseDMY(dmy) {
      const [dd, mm, yyyy] = dmy.split("/").map(Number);
      return new Date(yyyy, mm - 1, dd);
    }

    function todayStart() {
      const now = new Date();
      return new Date(now.getFullYear(), now.getMonth(), now.getDate());
    }

    const today = todayStart();

    document.querySelectorAll(".letter-card").forEach((card) => {
      const unlockDate = parseDMY(card.dataset.title);

      if (unlockDate > today) {
        card.classList.add("locked");
        card.disabled = true;
        return;
      }

      card.addEventListener("click", () => {
        openModal(card.dataset.title, card.dataset.body, card.dataset.paper);
      });
    });

    closeBtn.addEventListener("click", closeModal);

    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) closeModal();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
  </script>
</body>
</html>
